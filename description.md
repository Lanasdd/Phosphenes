# Phosphenes
## О боте
Данный бот создан для организации тренировочного процесса в волейбольной команде. А именно, для информирования участников команды о важных событиях или каких-либо изменениях в расписании, посредством использования команды send_all и одноименной функции, для рассылки сообщений в определенное время для напоминания о приближающейся тренировке, используя функцию 'send_scheduled_message' и библиотеку schedule, благодаря которой есть возможность планирования выполнения задач в определенное время, для просмотра расписания и результатов игр в различных соревнованиях, , а также для возможности узнать прогноз погоды, что особенно важно в сезон пляжного волейбола, еще бот отправляет напоминания о том, что необходимо пройти опрос, то есть указать, идешь ли ты на тренировку, что является удобной и полезной функцией для тренера, который сможет заранее создать план тренировки.

## Библиотеки
1.	sqlite3: Библиотека для работы с базами данных SQLite.
2.	telebot: Библиотека для работы с Telegram Bot API.
3.	schedule: Библиотека для планирования выполнения задач в определенное время. В данном коде используется для создания расписания отправки сообщений пользователю.
4.	requests: Библиотека для отправки HTTP-запросов. В данном коде используется для отправки GET-запроса к API погоды и получения данных о погоде.

## Функционал
## Рассылка
Существует команда 'total-results', вызвав которую будет  выполняться функция 'total_results'. 
Если chat.id пользователя, отправившего команду, совпадает с admin_id, то каждому пользователю из списка 'users_all' отправляется сообщение, указанное после команды \send_all.
Когда сообщение отправится всем пользователям, то админу придет сообщение: 'Сообщение отправлено всем пользователям.', указывая, что сообщение было отправлено всем пользователям.
Если chat.id пользователя, отправившего команду, не совпадает с admin_id, это означает, что у пользователя нет прав на использование данной команды. В этом случае бот отправляет ответ на исходное сообщение: 'У вас нет доступа к этой команде.' указывая, что у пользователя нет доступа к этой команде.

## Напоминания
Отправка сообщений по расписанию с использованием библиотеки schedule, планирование выполнения функции send_scheduled_message

Функция send_scheduled_message() отправляет сообщение (message2) списку пользователей (user_ids), внесенных в таблицу базы данных.

Планирование запуска функции send_scheduled_message в определенные дни и время происходит с помощью функции schedule.every().day.at('time').do(function). В моем случае выполнение функции запланировано по средам в 10:00, пятницам в 10:00 и воскресеньям в 10:00.

функция schedule_messages() постоянно проверяет наличие ожидающих запланированных задач и запускает их с помощью schedule.run_pending(). Между проверками она засыпает на 1 секунду с помощью функции time.sleep(1)

